# 狼人杀游戏模拟器  
  
## 1. 项目概述  
设计并实现一个7人局狼人杀游戏模拟器，通过为不同角色设置不同的AI策略，完全自动运行多轮游戏并统计不同策略组合下的各阵营胜率。该系统无需任何真人参与或输入，完全通过AI策略自主模拟游戏进程。  
模拟器支持保存每单局对局的游戏进程信息，供系统主查看复盘
  
## 2. 游戏基本规则  
  
### 2.1 参与人数与角色配置  
- 总人数：7人  
- 角色配置：  
  - 狼人阵营：2名狼人  
  - 好人阵营：5人  
    - 预言家：1名  
    - 女巫：1名  
    - 猎人：1名  
    - 村民：2名  

支持自定义玩家自定义对局配置，需要在对局前对阵容进行检查：至少有一名狼人角色
  
### 2.2 角色技能  
- **狼人**：每晚可以共同商议杀死一名玩家  
- **预言家**：每晚可以查验一名玩家的身份（狼人或好人）  
- **女巫**：拥有一瓶解药和一瓶毒药，可以选择拯救被狼人杀害的玩家或毒死任意一名玩家，但解药和毒药不能在同一晚使用  
- **猎人**：当猎人被狼人杀害或被村民公投出局时，可以开枪带走一名玩家（若被女巫毒死则无法开枪）  
- **村民**：没有特殊技能，只能通过白天的发言和投票来找出狼人  
- 支持未来扩展更多角色
  
### 2.3 游戏流程（自动化模拟）  
1. **准备阶段**：  
   - 系统随机分配角色给7名AI玩家  
   - 系统为每个角色分配要实验的预设的AI策略  
	   - 支持自定义预设对局角色AI策略配置
	   - 支持未来扩展更多AI策略
  
2. **夜晚阶段**：  
   - 狼人AI根据策略选择一名玩家击杀  
   - 预言家AI根据策略选择一名玩家查验身份  
   - 女巫AI根据策略决定是否使用解药或毒药  
   - 猎人技能在死亡时由AI根据策略触发  
  
3. **白天阶段**：  
   - 系统宣布夜晚死亡情况  
   - AI玩家根据各自策略模拟发言和讨论过程  
   - AI玩家根据策略进行投票，得票最多的玩家被公投出局  
   - 若得票相同，则根据预设规则决定结果  
  
4. **胜负判定**：  
   - 狼人阵营胜利条件：狼人数量等于或大于好人数量  
   - 好人阵营胜利条件：所有狼人被淘汰  
  
## 3. 系统功能需求  
  
### 3.1 核心游戏模拟功能  
- **角色分配机制**：随机分配角色给7名AI玩家  
- **游戏流程控制**：完全自动按顺序执行夜晚和白天阶段  
- **AI行动决策系统**：根据角色策略自动做出相应的行动决策  
- **胜负判定**：根据游戏规则自动判断胜利阵营  
- **对局记录**：记录每局对局行动消息到文本文件中
  
### 3.2 AI策略系统  
- **策略接口设计**：定义所有角色共同遵循的策略接口  
- **内置策略实现**：  
  - **随机策略(Random)**：随机选择目标或行动，不考虑任何游戏状态  
  - **基础逻辑策略(BasicLogic)**：基于简单逻辑规则选择目标（如狼人优先攻击非狼人，预言家优先查验未确定身份的玩家）  
  - **概率策略(Probability)**：根据概率分布选择行动（如预言家根据可疑度概率选择查验对象）  
  - **记忆策略(Memory)**：能够记住之前的游戏状态和决策结果，并根据历史信息调整策略  
  - **最优策略(Optimal)**：基于游戏理论和最优决策算法，尝试做出理论上最优的选择  
- **策略绑定机制**：为不同角色或玩家绑定不同策略，支持策略组合测试  
  
### 3.3 多轮模拟与统计功能  
- **多轮游戏支持**：能够连续自动运行指定数量的游戏（如1000+轮）  
- **数据收集**：自动记录每轮游戏的结果、时长、关键事件等详细数据  
- **统计分析**：  
  - 各阵营整体胜率统计  
  - 角色存活率、击杀率、准确率等衍生数据统计  
  - 游戏时长、轮数分布等数据统计  
- **结果展示**：以文本形式清晰输出统计结果和分析报告（控制台），并保存文件留档  
  
## 4. 系统架构设计  
  
### 4.1 核心类设计  
略
  
### 4.2 主要流程  
1. 初始化模拟器并配置参数（轮数、策略组合等）  
2. 为每个角色或AI玩家分配指定的策略  
3. 自动运行指定数量的游戏  
4. 实时收集并汇总游戏结果数据  
5. 生成并输出统计分析报告  
  
## 5. 技术实现细节  
  
### 5.1 策略模式实现  
- 使用策略模式实现不同AI策略的切换和组合  
- 每个策略类实现相同的接口，方便替换和扩展  
  
### 5.2 随机数生成  
- 使用Java的Random类或ThreadLocalRandom生成随机数  
- 确保随机数的分布均匀，避免出现偏向性  
  
### 5.3 数据结构  
- 使用ArrayList存储玩家列表和角色列表  
- 使用HashMap存储策略映射和统计数据  
- 使用枚举类型表示角色类型、阵营和游戏状态  
  
### 5.4 输入输出  
- 支持命令行参数配置模拟参数  
- 提供简洁明了的结果输出格式  
- 支持输出详细日志用于调试和分析  
  
## 6. 使用说明  
  
### 6.1 编译运行  
1. 编译Java源代码：`javac -d bin src/*.java`  
2. 运行程序：`java -cp bin Main [参数]`  
3. 文件保存：保存log【对局id】.txt和report.txt至项目目标位置中
  
## 7. 扩展性考虑  
- 支持添加新角色类型和新AI策略  
- 支持通过配置文件调整游戏人数和角色配置  
- 支持更复杂的AI决策模型和算法集成  
  
## 8. 性能要求  
- 能够高效运行大量游戏轮次（如1000+轮）  
- 内存占用合理，避免不必要的对象创建  
- 统计计算高效，快速生成结果报告  
  
## 9. 应用场景  
- 研究不同策略组合下的游戏平衡性  
- 测试新角色或新规则对游戏胜率的影响  
- 分析狼人杀游戏中的最优策略  
- 作为AI决策系统的教学案例